// Generated by CoffeeScript 1.12.1
(function() {
  var Player, PlayerBullet, idleState, moveState,
    extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  Player = (function(superClass) {
    extend(Player, superClass);

    Player.prototype.VELOCITY = 0.4;

    Player.prototype.stoppped = false;

    Player.prototype.touching = null;

    function Player(game) {
      this.InitSprite(game, 0, 0);
      this.Bind.Texture("player-right-idle");
      this.spriteSheetAnim = this.Animations.SpriteSheet(16, 16, 2);
      this.spriteSheetAnim.Stop();
      this.audioPlayer = this.game.Audio.CreateAudioPlayer();
      this.audioPlayer.volume = 0.25;
      this.movementStateMachine = this.States.CreateStateMachine("Movement");
      this.movementStateMachine.State("idle", idleState);
      this.movementStateMachine.State("move", moveState);
      this.movementStateMachine.Switch("idle");
      this.drawIndex = 11;
      this.facing = "forward";
      this.shootKeyWasDown = false;
      this.game.Camera.JerkFollow(this);
      this.game.Keys.Space.On("KeyUp", (function(_this) {
        return function() {
          var b;
          _this.audioPlayer.PlaySound("shoot");
          return b = new PlayerBullet(_this);
        };
      })(this));
      this.SetUpCollisions();
    }

    Player.Load = function(game) {
      game.Load.Texture("Assets/Art/player/player-forward-idle.png", "player-forward-idle");
      game.Load.Texture("Assets/Art/player/player-backward-idle.png", "player-backward-idle");
      game.Load.Texture("Assets/Art/player/player-right-idle-sheet.png", "player-right-idle");
      game.Load.Texture("Assets/Art/player/player-left.png", "player-left-idle");
      game.Load.Texture("Assets/Art/player/bullet.png", "player-bullet");
      return game.Load.Texture("Assets/Art/player/shoot-particle.png", "shoot-particle");
    };

    Player.prototype.Update = function() {
      return Player.__super__.Update.call(this);
    };

    Player.prototype.SetUpCollisions = function() {
      this.Collisions.Monitor();
      return this.On("Collision", (function(_this) {
        return function(event) {
          return _this.HandleCollision(event);
        };
      })(this));
    };

    Player.prototype.HandleCollision = function(event) {
      if (!event.collisionData.collider.hardBlock) {
        return;
      }
      return this.Collisions.SimpleCollisionHandle(event, 0.5);
    };

    return Player;

  })(Torch.Sprite);

  idleState = {
    Execute: function(player) {
      if (this.game.Keys.W.down) {
        player.facing = "forward";
        return this.stateMachine.Switch("move", "W", {
          x: 0,
          y: -1
        });
      } else if (this.game.Keys.S.down) {
        player.facing = "backward";
        return this.stateMachine.Switch("move", "S", {
          x: 0,
          y: 1
        });
      } else if (this.game.Keys.D.down) {
        player.facing = "right";
        return this.stateMachine.Switch("move", "D", {
          x: 1,
          y: 0
        });
      } else if (this.game.Keys.A.down) {
        player.facing = "left";
        return this.stateMachine.Switch("move", "A", {
          x: -1,
          y: 0
        });
      }
    },
    Start: function(player) {
      player.Body.velocity.x = 0;
      return player.Body.velocity.y = 0;
    },
    End: function(player) {}
  };

  moveState = {
    Execute: function(player) {
      if (!this.game.Keys[this.triggerKey].down) {
        return this.stateMachine.Switch("idle");
      }
    },
    Start: function(player, key, velocity) {
      player.spriteSheetAnim.Start();
      player.Body.velocity.y = velocity.y * player.VELOCITY;
      player.Body.velocity.x = velocity.x * player.VELOCITY;
      this.triggerKey = key;
      switch (player.facing) {
        case "forward":
          player.Bind.Texture("player-forward-idle");
          return player.spriteSheetAnim.SyncFrame();
        case "backward":
          player.Bind.Texture("player-backward-idle");
          return player.spriteSheetAnim.SyncFrame();
        case "right":
          player.Bind.Texture("player-right-idle");
          return player.spriteSheetAnim.SyncFrame();
        case "left":
          player.Bind.Texture("player-left-idle");
          return player.spriteSheetAnim.SyncFrame();
      }
    },
    End: function(player) {
      player.spriteSheetAnim.Stop();
      return player.spriteSheetAnim.Index(0);
    }
  };

  PlayerBullet = (function(superClass) {
    extend(PlayerBullet, superClass);

    PlayerBullet.prototype.DAMAGE = 1;

    function PlayerBullet(shooter) {
      this.InitSprite(shooter.game, shooter.position.x, shooter.position.y);
      this.Bind.Texture("player-bullet");
      this.drawIndex = shooter.drawIndex + 1;
      this.VELOCITY = 1.5;
      switch (shooter.facing) {
        case "forward":
          this.Body.velocity.y = -1 * this.VELOCITY;
          this.position.y -= 0.3 * shooter.rectangle.height;
          this.position.x += 0.1 * shooter.rectangle.width;
          break;
        case "backward":
          this.Body.velocity.y = 1 * this.VELOCITY;
          this.position.x += 0.1 * shooter.rectangle.width;
          this.position.y += 0.3 * shooter.rectangle.height;
          break;
        case "right":
          this.Body.velocity.x = 1 * this.VELOCITY;
          this.position.x += 1.1 * shooter.rectangle.width;
          this.position.y += 0.25 * shooter.rectangle.height;
          this.rotation = Math.PI / 2;
          break;
        case "left":
          this.Body.velocity.x = -1 * this.VELOCITY;
          this.position.x -= 0.1 * shooter.rectangle.width;
          this.position.y += 0.25 * shooter.rectangle.height;
          this.rotation = Math.PI / 2;
      }
      this.Size.scale.width = this.Size.scale.height = 10;
      this.emitter = this.game.Particles.ParticleEmitter(500, 500, 500, true, "shoot-particle", {
        spread: 20,
        gravity: 0.0001,
        minAngle: 0,
        maxAngle: Math.PI * 2,
        minScale: 2,
        maxScale: 4,
        minVelocity: 0.01,
        maxVelocity: 0.01,
        minAlphaDecay: 200,
        maxAlphaDecay: 250,
        minOmega: 0.001,
        maxOmega: 0.001
      });
      this.emitter.auto = false;
      this.emitter.position = this.position.Clone();
      this.emitter.EmitParticles(true);
      this.Collisions.Monitor();
      this.On("Collision", (function(_this) {
        return function(event) {
          if (!event.collisionData.collider.hardBlock) {
            return;
          }
          event.collisionData.collider.hp -= _this.DAMAGE;
          _this.Trash();
          _this.emitter.particle = "particle";
          _this.emitter.position = _this.position.Clone();
          return _this.emitter.EmitParticles(true);
        };
      })(this));
    }

    PlayerBullet.prototype.Update = function() {
      return PlayerBullet.__super__.Update.call(this);
    };

    return PlayerBullet;

  })(Torch.Sprite);

  window.Player = Player;

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlUm9vdCI6Ii4uXFwuLlxcLi4iLCJzb3VyY2VzIjpbIkdhbWVzXFxaZWxkcm9pZFxcU3JjXFxQbGF5ZXIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQTtBQUFBLE1BQUEsMENBQUE7SUFBQTs7O0VBQU07OztxQkFDRixRQUFBLEdBQVU7O3FCQUNWLFFBQUEsR0FBVTs7cUJBQ1YsUUFBQSxHQUFVOztJQUNHLGdCQUFDLElBQUQ7TUFDVCxJQUFDLENBQUEsVUFBRCxDQUFZLElBQVosRUFBa0IsQ0FBbEIsRUFBcUIsQ0FBckI7TUFDQSxJQUFDLENBQUEsSUFBSSxDQUFDLE9BQU4sQ0FBYyxtQkFBZDtNQUNBLElBQUMsQ0FBQSxlQUFELEdBQW1CLElBQUMsQ0FBQSxVQUFVLENBQUMsV0FBWixDQUF3QixFQUF4QixFQUE0QixFQUE1QixFQUFnQyxDQUFoQztNQUNuQixJQUFDLENBQUEsZUFBZSxDQUFDLElBQWpCLENBQUE7TUFFQSxJQUFDLENBQUEsV0FBRCxHQUFlLElBQUMsQ0FBQSxJQUFJLENBQUMsS0FBSyxDQUFDLGlCQUFaLENBQUE7TUFDZixJQUFDLENBQUEsV0FBVyxDQUFDLE1BQWIsR0FBc0I7TUFFdEIsSUFBQyxDQUFBLG9CQUFELEdBQXdCLElBQUMsQ0FBQSxNQUFNLENBQUMsa0JBQVIsQ0FBMkIsVUFBM0I7TUFDeEIsSUFBQyxDQUFBLG9CQUFvQixDQUFDLEtBQXRCLENBQTRCLE1BQTVCLEVBQW9DLFNBQXBDO01BQ0EsSUFBQyxDQUFBLG9CQUFvQixDQUFDLEtBQXRCLENBQTRCLE1BQTVCLEVBQW9DLFNBQXBDO01BQ0EsSUFBQyxDQUFBLG9CQUFvQixDQUFDLE1BQXRCLENBQTZCLE1BQTdCO01BRUEsSUFBQyxDQUFBLFNBQUQsR0FBYTtNQUNiLElBQUMsQ0FBQSxNQUFELEdBQVU7TUFDVixJQUFDLENBQUEsZUFBRCxHQUFtQjtNQUVuQixJQUFDLENBQUEsSUFBSSxDQUFDLE1BQU0sQ0FBQyxVQUFiLENB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QUFBO0lBREk7Ozs7S0ExRGUsS0FBSyxDQUFDOztFQThEakMsTUFBTSxDQUFDLE1BQVAsR0FBZ0I7QUFyS2hCIiwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgUGxheWVyIGV4dGVuZHMgVG9yY2guU3ByaXRlXHJcbiAgICBWRUxPQ0lUWTogMC40XHJcbiAgICBzdG9wcHBlZDogZmFsc2VcclxuICAgIHRvdWNoaW5nOiBudWxsXHJcbiAgICBjb25zdHJ1Y3RvcjogKGdhbWUpIC0+XHJcbiAgICAgICAgQEluaXRTcHJpdGUoZ2FtZSwgMCwgMClcclxuICAgICAgICBAQmluZC5UZXh0dXJlKFwicGxheWVyLXJpZ2h0LWlkbGVcIilcclxuICAgICAgICBAc3ByaXRlU2hlZXRBbmltID0gQEFuaW1hdGlvbnMuU3ByaXRlU2hlZXQoMTYsIDE2LCAyKVxyXG4gICAgICAgIEBzcHJpdGVTaGVldEFuaW0uU3RvcCgpXHJcblxyXG4gICAgICAgIEBhdWRpb1BsYXllciA9IEBnYW1lLkF1ZGlvLkNyZWF0ZUF1ZGlvUGxheWVyKClcclxuICAgICAgICBAYXVkaW9QbGF5ZXIudm9sdW1lID0gMC4yNVxyXG5cclxuICAgICAgICBAbW92ZW1lbnRTdGF0ZU1hY2hpbmUgPSBAU3RhdGVzLkNyZWF0ZVN0YXRlTWFjaGluZShcIk1vdmVtZW50XCIpXHJcbiAgICAgICAgQG1vdmVtZW50U3RhdGVNYWNoaW5lLlN0YXRlKFwiaWRsZVwiLCBpZGxlU3RhdGUpXHJcbiAgICAgICAgQG1vdmVtZW50U3RhdGVNYWNoaW5lLlN0YXRlKFwibW92ZVwiLCBtb3ZlU3RhdGUpXHJcbiAgICAgICAgQG1vdmVtZW50U3RhdGVNYWNoaW5lLlN3aXRjaChcImlkbGVcIilcclxuXHJcbiAgICAgICAgQGRyYXdJbmRleCA9IDExXHJcbiAgICAgICAgQGZhY2luZyA9IFwiZm9yd2FyZFwiXHJcbiAgICAgICAgQHNob290S2V5V2FzRG93biA9IGZhbHNlXHJcblxyXG4gICAgICAgIEBnYW1lLkNhbWVyYS5KZXJrRm9sbG93KEApXHJcbiAgICAgICAgXHJcbiAgICAgICAgQGdhbWUuS2V5cy5TcGFjZS5PbiBcIktleVVwXCIsID0+XHJcbiAgICAgICAgICAgIEBhdWRpb1BsYXllci5QbGF5U291bmQoXCJzaG9vdFwiKVxyXG4gICAgICAgICAgICBiID0gbmV3IFBsYXllckJ1bGxldChAKVxyXG5cclxuICAgICAgICBAU2V0VXBDb2xsaXNpb25zKClcclxuXHJcbiAgICBATG9hZDogKGdhbWUpIC0+XHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L3BsYXllci9wbGF5ZXItZm9yd2FyZC1pZGxlLnBuZ1wiLCBcInBsYXllci1mb3J3YXJkLWlkbGVcIilcclxuICAgICAgICBnYW1lLkxvYWQuVGV4dHVyZShcIkFzc2V0cy9BcnQvcGxheWVyL3BsYXllci1iYWNrd2FyZC1pZGxlLnBuZ1wiLCBcInBsYXllci1iYWNrd2FyZC1pZGxlXCIpXHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L3BsYXllci9wbGF5ZXItcmlnaHQtaWRsZS1zaGVldC5wbmdcIiwgXCJwbGF5ZXItcmlnaHQtaWRsZVwiKVxyXG4gICAgICAgIGdhbWUuTG9hZC5UZXh0dXJlKFwiQXNzZXRzL0FydC9wbGF5ZXIvcGxheWVyLWxlZnQucG5nXCIsIFwicGxheWVyLWxlZnQtaWRsZVwiKVxyXG5cclxuICAgICAgICBnYW1lLkxvYWQuVGV4dHVyZShcIkFzc2V0cy9BcnQvcGxheWVyL2J1bGxldC5wbmdcIiwgXCJwbGF5ZXItYnVsbGV0XCIpXHJcbiAgICAgICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L3BsYXllci9zaG9vdC1wYXJ0aWNsZS5wbmdcIiwgXCJzaG9vdC1wYXJ0aWNsZVwiKVxyXG5cclxuICAgIFVwZGF0ZTogLT5cclxuICAgICAgICBzdXBlcigpXHJcblxyXG4gICAgU2V0VXBDb2xsaXNpb25zOiAtPlxyXG4gICAgICAgIEBDb2xsaXNpb25zLk1vbml0b3IoKVxyXG4gICAgICAgIEBPbiBcIkNvbGxpc2lvblwiLCAoZXZlbnQpID0+XHJcbiAgICAgICAgICAgIEBIYW5kbGVDb2xsaXNpb24oZXZlbnQpXHJcblxyXG4gICAgSGFuZGxlQ29sbGlzaW9uOiAoZXZlbnQpIC0+XHJcbiAgICAgICAgcmV0dXJuIGlmIG5vdCBldmVudC5jb2xsaXNpb25EYXRhLmNvbGxpZGVyLmhhcmRCbG9ja1xyXG4gICAgICAgIEBDb2xsaXNpb25zLlNpbXBsZUNvbGxpc2lvbkhhbmRsZShldmVudCwgMC41KVxyXG5cclxuXHJcbmlkbGVTdGF0ZSA9XHJcbiAgICBFeGVjdXRlOiAocGxheWVyKSAtPlxyXG4gICAgICAgIGlmIEBnYW1lLktleXMuVy5kb3duXHJcbiAgICAgICAgICAgIHBsYXllci5mYWNpbmcgPSBcImZvcndhcmRcIlxyXG4gICAgICAgICAgICBAc3RhdGVNYWNoaW5lLlN3aXRjaChcIm1vdmVcIiwgXCJXXCIsIHt4OiAwLCB5OiAtMX0pXHJcbiAgICAgICAgZWxzZSBpZiBAZ2FtZS5LZXlzLlMuZG93blxyXG4gICAgICAgICAgICBwbGF5ZXIuZmFjaW5nID0gXCJiYWNrd2FyZFwiXHJcbiAgICAgICAgICAgIEBzdGF0ZU1hY2hpbmUuU3dpdGNoKFwibW92ZVwiLCBcIlNcIiwge3g6IDAsIHk6IDF9KVxyXG4gICAgICAgIGVsc2UgaWYgQGdhbWUuS2V5cy5ELmRvd25cclxuICAgICAgICAgICAgcGxheWVyLmZhY2luZyA9IFwicmlnaHRcIlxyXG4gICAgICAgICAgICBAc3RhdGVNYWNoaW5lLlN3aXRjaChcIm1vdmVcIiwgXCJEXCIsIHt4OiAxLCB5OiAwfSlcclxuICAgICAgICBlbHNlIGlmIEBnYW1lLktleXMuQS5kb3duXHJcbiAgICAgICAgICAgIHBsYXllci5mYWNpbmcgPSBcImxlZnRcIlxyXG4gICAgICAgICAgICBAc3RhdGVNYWNoaW5lLlN3aXRjaChcIm1vdmVcIiwgXCJBXCIsIHt4OiAtMSwgeTogMH0pXHJcblxyXG4gICAgU3RhcnQ6IChwbGF5ZXIpIC0+XHJcbiAgICAgICAgcGxheWVyLkJvZHkudmVsb2NpdHkueCA9IDBcclxuICAgICAgICBwbGF5ZXIuQm9keS52ZWxvY2l0eS55ID0gMFxyXG5cclxuICAgIEVuZDogKHBsYXllcikgLT5cclxuICAgICAgICAjIC4uLlxyXG5cclxubW92ZVN0YXRlID1cclxuICAgIEV4ZWN1dGU6IChwbGF5ZXIpIC0+XHJcbiAgICAgICAgaWYgbm90IEBnYW1lLktleXNbQHRyaWdnZXJLZXldLmRvd25cclxuICAgICAgICAgICAgQHN0YXRlTWFjaGluZS5Td2l0Y2goXCJpZGxlXCIpXHJcblxyXG4gICAgU3RhcnQ6IChwbGF5ZXIsIGtleSwgdmVsb2NpdHkpIC0+XHJcbiAgICAgICAgcGxheWVyLnNwcml0ZVNoZWV0QW5pbS5TdGFydCgpXHJcbiAgICAgICAgcGxheWVyLkJvZHkudmVsb2NpdHkueSA9IHZlbG9jaXR5LnkgKiBwbGF5ZXIuVkVMT0NJVFlcclxuICAgICAgICBwbGF5ZXIuQm9keS52ZWxvY2l0eS54ID0gdmVsb2NpdHkueCAqIHBsYXllci5WRUxPQ0lUWVxyXG4gICAgICAgIEB0cmlnZ2VyS2V5ID0ga2V5XHJcblxyXG4gICAgICAgIHN3aXRjaCBwbGF5ZXIuZmFjaW5nXHJcbiAgICAgICAgICAgIHdoZW4gXCJmb3J3YXJkXCJcclxuICAgICAgICAgICAgICAgIHBsYXllci5CaW5kLlRleHR1cmUoXCJwbGF5ZXItZm9yd2FyZC1pZGxlXCIpXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuc3ByaXRlU2hlZXRBbmltLlN5bmNGcmFtZSgpXHJcbiAgICAgICAgICAgIHdoZW4gXCJiYWNrd2FyZFwiXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuQmluZC5UZXh0dXJlKFwicGxheWVyLWJhY2t3YXJkLWlkbGVcIilcclxuICAgICAgICAgICAgICAgIHBsYXllci5zcHJpdGVTaGVldEFuaW0uU3luY0ZyYW1lKClcclxuICAgICAgICAgICAgd2hlbiBcInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgIHBsYXllci5CaW5kLlRleHR1cmUoXCJwbGF5ZXItcmlnaHQtaWRsZVwiKVxyXG4gICAgICAgICAgICAgICAgcGxheWVyLnNwcml0ZVNoZWV0QW5pbS5TeW5jRnJhbWUoKVxyXG4gICAgICAgICAgICB3aGVuIFwibGVmdFwiXHJcbiAgICAgICAgICAgICAgICBwbGF5ZXIuQmluZC5UZXh0dXJlKFwicGxheWVyLWxlZnQtaWRsZVwiKVxyXG4gICAgICAgICAgICAgICAgcGxheWVyLnNwcml0ZVNoZWV0QW5pbS5TeW5jRnJhbWUoKVxyXG5cclxuICAgIEVuZDogKHBsYXllcikgLT5cclxuICAgICAgICBwbGF5ZXIuc3ByaXRlU2hlZXRBbmltLlN0b3AoKVxyXG4gICAgICAgIHBsYXllci5zcHJpdGVTaGVldEFuaW0uSW5kZXgoMClcclxuXHJcbmNsYXNzIFBsYXllckJ1bGxldCBleHRlbmRzIFRvcmNoLlNwcml0ZVxyXG4gICAgREFNQUdFOiAxXHJcbiAgICBjb25zdHJ1Y3RvcjogKHNob290ZXIpIC0+XHJcbiAgICAgICAgQEluaXRTcHJpdGUoc2hvb3Rlci5nYW1lLCBzaG9vdGVyLnBvc2l0aW9uLngsIHNob290ZXIucG9zaXRpb24ueSlcclxuICAgICAgICBAQmluZC5UZXh0dXJlKFwicGxheWVyLWJ1bGxldFwiKVxyXG4gICAgICAgIEBkcmF3SW5kZXggPSBzaG9vdGVyLmRyYXdJbmRleCArIDFcclxuXHJcbiAgICAgICAgQFZFTE9DSVRZID0gMS41XHJcbiAgICAgICAgc3dpdGNoIHNob290ZXIuZmFjaW5nXHJcbiAgICAgICAgICAgIHdoZW4gXCJmb3J3YXJkXCJcclxuICAgICAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LnkgPSAtMSAqIEBWRUxPQ0lUWVxyXG4gICAgICAgICAgICAgICAgQHBvc2l0aW9uLnkgLT0gMC4zICogc2hvb3Rlci5yZWN0YW5nbGUuaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICBAcG9zaXRpb24ueCArPSAwLjEgKiBzaG9vdGVyLnJlY3RhbmdsZS53aWR0aFxyXG4gICAgICAgICAgICB3aGVuIFwiYmFja3dhcmRcIlxyXG4gICAgICAgICAgICAgICAgQEJvZHkudmVsb2NpdHkueSA9IDEgKiBAVkVMT0NJVFlcclxuICAgICAgICAgICAgICAgIEBwb3NpdGlvbi54ICs9IDAuMSAqIHNob290ZXIucmVjdGFuZ2xlLndpZHRoXHJcbiAgICAgICAgICAgICAgICBAcG9zaXRpb24ueSArPSAwLjMgKiBzaG9vdGVyLnJlY3RhbmdsZS5oZWlnaHRcclxuICAgICAgICAgICAgd2hlbiBcInJpZ2h0XCJcclxuICAgICAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LnggPSAxICogQFZFTE9DSVRZXHJcbiAgICAgICAgICAgICAgICBAcG9zaXRpb24ueCArPSAxLjEgKiBzaG9vdGVyLnJlY3RhbmdsZS53aWR0aFxyXG4gICAgICAgICAgICAgICAgQHBvc2l0aW9uLnkgKz0gMC4yNSAqIHNob290ZXIucmVjdGFuZ2xlLmhlaWdodFxyXG4gICAgICAgICAgICAgICAgQHJvdGF0aW9uID0gTWF0aC5QSS8yXHJcbiAgICAgICAgICAgIHdoZW4gXCJsZWZ0XCJcclxuICAgICAgICAgICAgICAgIEBCb2R5LnZlbG9jaXR5LnggPSAtMSAqIEBWRUxPQ0lUWVxyXG4gICAgICAgICAgICAgICAgQHBvc2l0aW9uLnggLT0gMC4xICogc2hvb3Rlci5yZWN0YW5nbGUud2lkdGhcclxuICAgICAgICAgICAgICAgIEBwb3NpdGlvbi55ICs9IDAuMjUgKiBzaG9vdGVyLnJlY3RhbmdsZS5oZWlnaHRcclxuICAgICAgICAgICAgICAgIEByb3RhdGlvbiA9IE1hdGguUEkvMlxyXG5cclxuICAgICAgICBAU2l6ZS5zY2FsZS53aWR0aCA9IEBTaXplLnNjYWxlLmhlaWdodCA9IDEwXHJcblxyXG4gICAgICAgIEBlbWl0dGVyID0gQGdhbWUuUGFydGljbGVzLlBhcnRpY2xlRW1pdHRlciA1MDAsIDUwMCwgNTAwLCB0cnVlLCBcInNob290LXBhcnRpY2xlXCIsXHJcbiAgICAgICAgICAgIHNwcmVhZDogMjBcclxuICAgICAgICAgICAgZ3Jhdml0eTogMC4wMDAxXHJcbiAgICAgICAgICAgIG1pbkFuZ2xlOiAwXHJcbiAgICAgICAgICAgIG1heEFuZ2xlOiBNYXRoLlBJICogMlxyXG4gICAgICAgICAgICBtaW5TY2FsZTogMlxyXG4gICAgICAgICAgICBtYXhTY2FsZTogNFxyXG4gICAgICAgICAgICBtaW5WZWxvY2l0eTogMC4wMVxyXG4gICAgICAgICAgICBtYXhWZWxvY2l0eTogMC4wMVxyXG4gICAgICAgICAgICBtaW5BbHBoYURlY2F5OiAyMDBcclxuICAgICAgICAgICAgbWF4QWxwaGFEZWNheTogMjUwXHJcbiAgICAgICAgICAgIG1pbk9tZWdhOiAwLjAwMVxyXG4gICAgICAgICAgICBtYXhPbWVnYTogMC4wMDFcclxuICAgICAgICBAZW1pdHRlci5hdXRvID0gZmFsc2VcclxuICAgICAgICBAZW1pdHRlci5wb3NpdGlvbiA9IEBwb3NpdGlvbi5DbG9uZSgpXHJcbiAgICAgICAgQGVtaXR0ZXIuRW1pdFBhcnRpY2xlcyh0cnVlKVxyXG5cclxuICAgICAgICBAQ29sbGlzaW9ucy5Nb25pdG9yKClcclxuICAgICAgICBAT24gXCJDb2xsaXNpb25cIiwgKGV2ZW50KSA9PlxyXG4gICAgICAgICAgICByZXR1cm4gaWYgbm90IGV2ZW50LmNvbGxpc2lvbkRhdGEuY29sbGlkZXIuaGFyZEJsb2NrXHJcbiAgICAgICAgICAgIGV2ZW50LmNvbGxpc2lvbkRhdGEuY29sbGlkZXIuaHAgLT0gQERBTUFHRVxyXG4gICAgICAgICAgICBAVHJhc2goKVxyXG5cclxuICAgICAgICAgICAgQGVtaXR0ZXIucGFydGljbGUgPSBcInBhcnRpY2xlXCJcclxuICAgICAgICAgICAgQGVtaXR0ZXIucG9zaXRpb24gPSBAcG9zaXRpb24uQ2xvbmUoKVxyXG4gICAgICAgICAgICBAZW1pdHRlci5FbWl0UGFydGljbGVzKHRydWUpXHJcblxyXG5cclxuICAgIFVwZGF0ZTogLT5cclxuICAgICAgICBzdXBlcigpXHJcblxyXG5cclxud2luZG93LlBsYXllciA9IFBsYXllclxyXG4iXX0=
//# sourceURL=C:\dev\js\Torch.js\Games\Zeldroid\Src\Player.coffee