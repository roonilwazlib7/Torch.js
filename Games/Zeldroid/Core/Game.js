// Generated by CoffeeScript 1.12.1
(function() {
  var Draw, Init, Load, SetUpConsoleCommands, Update, zeldroid;

  Torch.StrictErrors();

  Torch.DumpErrors();

  zeldroid = new Torch.Game("container", "fill", "fill", "Zeldroid", Torch.CANVAS);

  zeldroid.GetScale = function() {
    return zeldroid.Camera.Viewport.width / 480;
  };

  Load = function(game) {
    Player.Load(game);
    HUD.Load(game);
    MapPieces.MapPiece.Load(game);
    Enemy.Load(game);
    game.Load.Texture("Assets/Art/particle.png", "particle");
    game.Load.Texture("Assets/Art/line.png", "line");
    game.Load.File("Maps/test-map-2.map", "map-1");
    game.Load.File("package.json", "package");
    game.Load.Audio("Assets/Audio/shoot.wav", "shoot");
    game.Load.Audio("Assets/Audio/shoot-explode.wav", "shoot-explode");
    return game.On("LoadProgressed", function(event) {});
  };

  Init = function(game) {
    game.Clear("#00AF11");
    game.PixelScale();
    Torch.Scale = 4;
    game.backgroundAudioPlayer = game.Audio.CreateAudioPlayer();
    game.player = new Player(game);
    game.mapManager = new MapManager(game);
    game.hud = new HUD(game);
    game.mapManager.LoadMap("map-1");
    return SetUpConsoleCommands(game);
  };

  Draw = function(game) {};

  Update = function(game) {
    if (game.deltaTime > 1000 / 50) {
      return alert("FPS Dipped! " + game.deltaTime);
    }
  };

  zeldroid.Start({
    Load: Load,
    Update: Update,
    Draw: Draw,
    Init: Init
  });

  window.zeldroid = zeldroid;

  SetUpConsoleCommands = function(game) {
    game.debugConsole = new Torch.DebugConsole(game);
    game.debugConsole.AddCommand("SPAWN", function(tConsole, piece, x, y) {
      var p;
      p = new MapPieces[piece](game, ["0", "0"]);
      p.position.x = parseInt(x);
      p.position.y = parseInt(y);
      tConsole.game.Tweens.Tween(p, 500, Torch.Easing.Smooth).From({
        opacity: 0
      }).To({
        opacity: 1
      });
      return console.log(p);
    });
    game.debugConsole.AddCommand("UCAM", function(tConsole) {
      var camVelocity, task;
      camVelocity = 1;
      task = {
        _torch_add: "Task",
        Execute: function(game) {
          if (game.Keys.RightArrow.down) {
            game.Camera.position.x -= camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.LeftArrow.down) {
            game.Camera.position.x += camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.UpArrow.down) {
            game.Camera.position.y += camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.DownArrow.down) {
            return game.Camera.position.y -= camVelocity * game.Loop.updateDelta;
          }
        }
      };
      return game.Task(task);
    });
    return game.debugConsole.AddCommand("SAY", function(tConsole, thingToSay) {
      game.hud.terminal.DisplayText(thingToSay);
      return tConsole.Output("Said: " + thingToSay);
    });
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uIiwic291cmNlcyI6WyJHYW1lc1xcWmVsZHJvaWRcXFNyY1xcR2FtZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQTs7RUFBQSxLQUFLLENBQUMsWUFBTixDQUFBOztFQUNBLEtBQUssQ0FBQyxVQUFOLENBQUE7O0VBRUEsUUFBQSxHQUFlLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxXQUFYLEVBQXdCLE1BQXhCLEVBQWdDLE1BQWhDLEVBQXdDLFVBQXhDLEVBQW9ELEtBQUssQ0FBQyxNQUExRDs7RUFDZixRQUFRLENBQUMsUUFBVCxHQUFvQixTQUFBO0FBQ2hCLFdBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBekIsR0FBaUM7RUFEeEI7O0VBSXBCLElBQUEsR0FBTyxTQUFDLElBQUQ7SUFDSCxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVo7SUFDQSxHQUFHLENBQUMsSUFBSixDQUFTLElBQVQ7SUFDQSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQW5CLENBQXdCLElBQXhCO0lBQ0EsS0FBSyxDQUFDLElBQU4sQ0FBVyxJQUFYO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFWLENBQWtCLHlCQUFsQixFQUE2QyxVQUE3QztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBVixDQUFrQixxQkFBbEIsRUFBeUMsTUFBekM7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQVYsQ0FBZSxxQkFBZixFQUFzQyxPQUF0QztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBVixDQUFlLGNBQWYsRUFBK0IsU0FBL0I7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQVYsQ0FBZ0Isd0JBQWhCLEVBQTBDLE9BQTFDO0lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFWLENBQWdCLGdDQUFoQixFQUFrRCxlQUFsRDtXQUVBLElBQUksQ0FBQyxFQUFMLENBQVEs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UUFBUSxDQUFDLENBQXJCLElBQTBCLFdBQUEsR0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBRHREOztVQUVBLElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBdkI7bUJBQ0ksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBckIsSUFBMEIsV0FBQSxHQUFjLElBQUksQ0FBQyxJQUFJLENBQUMsWUFEdEQ7O1FBUEssQ0FEVDs7YUFVSixJQUFJLENBQUMsSUFBTCxDQUFVLElBQVY7SUFiaUMsQ0FBckM7V0FlQSxJQUFJLENBQUMsWUFBWSxDQUFDLFVBQWxCLENBQTZCLEtBQTdCLEVBQW9DLFNBQUMsUUFBRCxFQUFXLFVBQVg7TUFDaEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsV0FBbEIsQ0FBOEIsVUFBOUI7YUFDQSxRQUFRLENBQUMsTUFBVCxDQUFnQixRQUFBLEdBQVMsVUFBekI7SUFGZ0MsQ0FBcEM7RUEzQm1CO0FBckR2QiIsInNvdXJjZXNDb250ZW50IjpbIlRvcmNoLlN0cmljdEVycm9ycygpXHJcblRvcmNoLkR1bXBFcnJvcnMoKVxyXG5cclxuemVsZHJvaWQgPSBuZXcgVG9yY2guR2FtZShcImNvbnRhaW5lclwiLCBcImZpbGxcIiwgXCJmaWxsXCIsIFwiWmVsZHJvaWRcIiwgVG9yY2guQ0FOVkFTKVxyXG56ZWxkcm9pZC5HZXRTY2FsZSA9IC0+XHJcbiAgICByZXR1cm4gemVsZHJvaWQuQ2FtZXJhLlZpZXdwb3J0LndpZHRoIC8gNDgwXHJcblxyXG5cclxuTG9hZCA9IChnYW1lKSAtPlxyXG4gICAgUGxheWVyLkxvYWQoZ2FtZSlcclxuICAgIEhVRC5Mb2FkKGdhbWUpXHJcbiAgICBNYXBQaWVjZXMuTWFwUGllY2UuTG9hZChnYW1lKVxyXG4gICAgRW5lbXkuTG9hZChnYW1lKVxyXG5cclxuICAgIGdhbWUuTG9hZC5UZXh0dXJlKFwiQXNzZXRzL0FydC9wYXJ0aWNsZS5wbmdcIiwgXCJwYXJ0aWNsZVwiKVxyXG4gICAgZ2FtZS5Mb2FkLlRleHR1cmUoXCJBc3NldHMvQXJ0L2xpbmUucG5nXCIsIFwibGluZVwiKVxyXG5cclxuICAgIGdhbWUuTG9hZC5GaWxlKFwiTWFwcy90ZXN0LW1hcC0yLm1hcFwiLCBcIm1hcC0xXCIpXHJcbiAgICBnYW1lLkxvYWQuRmlsZShcInBhY2thZ2UuanNvblwiLCBcInBhY2thZ2VcIilcclxuICAgIGdhbWUuTG9hZC5BdWRpbyhcIkFzc2V0cy9BdWRpby9zaG9vdC53YXZcIiwgXCJzaG9vdFwiKVxyXG4gICAgZ2FtZS5Mb2FkLkF1ZGlvKFwiQXNzZXRzL0F1ZGlvL3Nob290LWV4cGxvZGUud2F2XCIsIFwic2hvb3QtZXhwbG9kZVwiKVxyXG5cclxuICAgIGdhbWUuT24gXCJMb2FkUHJvZ3Jlc3NlZFwiLCAoZXZlbnQpIC0+XHJcbiAgICAgICAgI2NvbnNvbGUubG9nKGV2ZW50LnByb2dyZXNzKVxyXG5cclxuSW5pdCA9IChnYW1lKSAtPlxyXG4gICAgZ2FtZS5DbGVhcihcIiMwMEFGMTFcIilcclxuICAgIGdhbWUuUGl4ZWxTY2FsZSgpXHJcbiAgICBUb3JjaC5TY2FsZSA9IDRcclxuXHJcbiAgICBnYW1lLmJhY2tncm91bmRBdWRpb1BsYXllciA9IGdhbWUuQXVkaW8uQ3JlYXRlQXVkaW9QbGF5ZXIoKVxyXG5cclxuICAgIGdhbWUucGxheWVyID0gbmV3IFBsYXllcihnYW1lKVxyXG4gICAgZ2FtZS5tYXBNYW5hZ2VyID0gbmV3IE1hcE1hbmFnZXIoZ2FtZSlcclxuICAgIGdhbWUuaHVkID0gbmV3IEhVRChnYW1lKVxyXG4gICAgZ2FtZS5tYXBNYW5hZ2VyLkxvYWRNYXAoXCJtYXAtMVwiKVxyXG4gICAgU2V0VXBDb25zb2xlQ29tbWFuZHMoZ2FtZSlcclxuXHJcbkRyYXcgPSAoZ2FtZSktPlxyXG5cclxuVXBkYXRlID0gKGdhbWUpIC0+XHJcbiAgICBpZiBnYW1lLmRlbHRhVGltZSA+IDEwMDAvNTAgdGhlbiBhbGVydChcIkZQUyBEaXBwZWQhICN7Z2FtZS5kZWx0YVRpbWV9XCIpXHJcblxyXG56ZWxkcm9pZC5TdGFydFxyXG4gICAgTG9hZDogTG9hZFxyXG4gICAgVXBkYXRlOiBVcGRhdGVcclxuICAgIERyYXc6IERyYXdcclxuICAgIEluaXQ6IEluaXRcclxuXHJcbndpbmRvdy56ZWxkcm9pZCA9IHplbGRyb2lkXHJcblxyXG5cclxuIyBpbml0aWFsaXphdGlvbi4uLlxyXG5TZXRVcENvbnNvbGVDb21tYW5kcyA9IChnYW1lKSAtPlxyXG4gICAgZ2FtZS5kZWJ1Z0NvbnNvbGUgPSBuZXcgVG9yY2guRGVidWdDb25zb2xlKGdhbWUpXHJcblxyXG4gICAgZ2FtZS5kZWJ1Z0NvbnNvbGUuQWRkQ29tbWFuZCBcIlNQQVdOXCIsICh0Q29uc29sZSwgcGllY2UsIHgsIHkpIC0+XHJcbiAgICAgICAgcCA9IG5ldyBNYXBQaWVjZXNbcGllY2VdKGdhbWUsIFtcIjBcIiwgXCIwXCJdKVxyXG4gICAgICAgIHAucG9zaXRpb24ueCA9IHBhcnNlSW50KHgpXHJcbiAgICAgICAgcC5wb3NpdGlvbi55ID0gcGFyc2VJbnQoeSlcclxuXHJcbiAgICAgICAgdENvbnNvbGUuZ2FtZS5Ud2VlbnMuVHdlZW4ocCwgNTAwLCBUb3JjaC5FYXNpbmcuU21vb3RoKS5Gcm9tKHtvcGFjaXR5OiAwfSkuVG8oe29wYWNpdHk6IDF9KVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhwKVxyXG5cclxuICAgIGdhbWUuZGVidWdDb25zb2xlLkFkZENvbW1hbmQgXCJVQ0FNXCIsICh0Q29uc29sZSkgLT5cclxuICAgICAgICBjYW1WZWxvY2l0eSA9IDFcclxuICAgICAgICB0YXNrID1cclxuICAgICAgICAgICAgX3RvcmNoX2FkZDogXCJUYXNrXCJcclxuICAgICAgICAgICAgRXhlY3V0ZTogKGdhbWUpIC0+XHJcbiAgICAgICAgICAgICAgICBpZiBnYW1lLktleXMuUmlnaHRBcnJvdy5kb3duXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5DYW1lcmEucG9zaXRpb24ueCAtPSBjYW1WZWxvY2l0eSAqIGdhbWUuTG9vcC51cGRhdGVEZWx0YVxyXG4gICAgICAgICAgICAgICAgaWYgZ2FtZS5LZXlzLkxlZnRBcnJvdy5kb3duXHJcbiAgICAgICAgICAgICAgICAgICAgZ2FtZS5DYW1lcmEucG9zaXRpb24ueCArPSBjYW1WZWxvY2l0eSAqIGdhbWUuTG9vcC51cGRhdGVEZWx0YVxyXG4gICAgICAgICAgICAgICAgaWYgZ2FtZS5LZXlzLlVwQXJyb3cuZG93blxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuQ2FtZXJhLnBvc2l0aW9uLnkgKz0gY2FtVmVsb2NpdHkgKiBnYW1lLkxvb3AudXBkYXRlRGVsdGFcclxuICAgICAgICAgICAgICAgIGlmIGdhbWUuS2V5cy5Eb3duQXJyb3cuZG93blxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuQ2FtZXJhLnBvc2l0aW9uLnkgLT0gY2FtVmVsb2NpdHkgKiBnYW1lLkxvb3AudXBkYXRlRGVsdGFcclxuICAgICAgICBnYW1lLlRhc2sodGFzaylcclxuXHJcbiAgICBnYW1lLmRlYnVnQ29uc29sZS5BZGRDb21tYW5kIFwiU0FZXCIsICh0Q29uc29sZSwgdGhpbmdUb1NheSkgLT5cclxuICAgICAgICBnYW1lLmh1ZC50ZXJtaW5hbC5EaXNwbGF5VGV4dCh0aGluZ1RvU2F5KVxyXG4gICAgICAgIHRDb25zb2xlLk91dHB1dChcIlNhaWQ6ICN7dGhpbmdUb1NheX1cIilcclxuIl19
//# sourceURL=C:\dev\js\Torch.js\Games\Zeldroid\Src\Game.coffee