// Generated by CoffeeScript 1.12.1
(function() {
  var Draw, Init, Load, SetUpConsoleCommands, Update, zeldroid;

  Torch.StrictErrors();

  Torch.DumpErrors();

  Torch.DisableConsoleWarnings();

  zeldroid = new Torch.Game("container", "fill", "fill", "Zeldroid", Torch.CANVAS);

  zeldroid.GetScale = function() {
    return zeldroid.Camera.Viewport.width / 480;
  };

  Load = function(game) {
    Player.Load(game);
    HUD.Load(game);
    MapPieces.MapPiece.Load(game);
    Enemy.Load(game);
    game.Load.Texture("Assets/Art/particle.png", "particle");
    game.Load.File("Maps/test-map-2.map", "map-1");
    game.Load.File("package.json", "package");
    game.Load.Audio("Assets/Audio/shoot.wav", "shoot");
    game.Load.Audio("Assets/Audio/shoot-explode.wav", "shoot-explode");
    return game.On("LoadProgressed", function(event) {});
  };

  Init = function(game) {
    var color;
    game.Clear("#00AF11");
    game.PixelScale();
    Torch.Scale = 4;
    game.backgroundAudioPlayer = game.Audio.CreateAudioPlayer();
    game.player = new Player(game);
    game.mapManager = new MapManager(game);
    game.hud = new HUD(game);
    color = Torch.Color.Random().GetHtmlString();
    game.circ = new Torch.Shapes.Circle(game, 50, 50, 25, color, color);
    game.circ.drawIndex = 1000;
    game.lin = new Torch.Shapes.Line(game, 0, 0, 500, 500, "orange", {
      lineWidth: 5
    });
    game.mapManager.LoadMap("map-1");
    return SetUpConsoleCommands(game);
  };

  Draw = function(game) {};

  Update = function(game) {
    if (game.deltaTime > 1000 / 50) {
      return alert("FPS Dipped! " + game.deltaTime);
    }
  };

  zeldroid.Start(Load, Update, Draw, Init);

  window.zeldroid = zeldroid;

  SetUpConsoleCommands = function(game) {
    game.debugCondole = new Torch.DebugConsole(game);
    game.debugCondole.AddCommand("SPAWN", function(tConsole, piece, x, y) {
      var p;
      p = new MapPieces[piece](game, ["0", "0"]);
      p.position.x = parseInt(x);
      p.position.y = parseInt(y);
      tConsole.game.Tweens.Tween(p, 500, Torch.Easing.Smooth).From({
        opacity: 0
      }).To({
        opacity: 1
      });
      return console.log(p);
    });
    return game.debugCondole.AddCommand("UCAM", function(tConsole) {
      var camVelocity, task;
      camVelocity = 1;
      task = {
        _torch_add: "Task",
        Execute: function(game) {
          if (game.Keys.RightArrow.down) {
            game.Camera.position.x -= camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.LeftArrow.down) {
            game.Camera.position.x += camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.UpArrow.down) {
            game.Camera.position.y += camVelocity * game.Loop.updateDelta;
          }
          if (game.Keys.DownArrow.down) {
            return game.Camera.position.y -= camVelocity * game.Loop.updateDelta;
          }
        }
      };
      return game.Task(task);
    });
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZS5qcyIsInNvdXJjZVJvb3QiOiIuLlxcLi5cXC4uIiwic291cmNlcyI6WyJHYW1lc1xcWmVsZHJvaWRcXFNyY1xcR2FtZS5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBO0FBQUEsTUFBQTs7RUFBQSxLQUFLLENBQUMsWUFBTixDQUFBOztFQUNBLEtBQUssQ0FBQyxVQUFOLENBQUE7O0VBQ0EsS0FBSyxDQUFDLHNCQUFOLENBQUE7O0VBRUEsUUFBQSxHQUFlLElBQUEsS0FBSyxDQUFDLElBQU4sQ0FBVyxXQUFYLEVBQXdCLE1BQXhCLEVBQWdDLE1BQWhDLEVBQXdDLFVBQXhDLEVBQW9ELEtBQUssQ0FBQyxNQUExRDs7RUFDZixRQUFRLENBQUMsUUFBVCxHQUFvQixTQUFBO0FBQ2hCLFdBQU8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsS0FBekIsR0FBaUM7RUFEeEI7O0VBSXBCLElBQUEsR0FBTyxTQUFDLElBQUQ7SUFDSCxNQUFNLENBQUMsSUFBUCxDQUFZLElBQVo7SUFDQSxHQUFHLENBQUMsSUFBSixDQUFTLElBQVQ7SUFDQSxTQUFTLENBQUMsUUFBUSxDQUFDLElBQW5CLENBQXdCLElBQXhCO0lBQ0EsS0FBSyxDQUFDLElBQU4sQ0FBVyxJQUFYO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFWLENBQWtCLHlCQUFsQixFQUE2QyxVQUE3QztJQUNBLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBVixDQUFlLHFCQUFmLEVBQXNDLE9BQXRDO0lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFWLENBQWUsY0FBZixFQUErQixTQUEvQjtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBVixDQUFnQix3QkFBaEIsRUFBMEMsT0FBMUM7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQVYsQ0FBZ0IsZ0NBQWhCLEVBQWtELGVBQWxEO1dBRUEsSUFBSSxDQUFDLEVBQUwsQ0FBUSxnQkFBUixFQUEwQixTQUFDLEtBQUQsR0FBQSxD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VUFDTCxJQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLElBQXhCO1lBQ0ksSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBckIsSUFBMEIsV0FBQSxHQUFjLElBQUksQ0FBQyxJQUFJLENBQUMsWUFEdEQ7O1VBRUEsSUFBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUF2QjtZQUNJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQXJCLElBQTBCLFdBQUEsR0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBRHREOztVQUVBLElBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBckI7WUFDSSxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFyQixJQUEwQixXQUFBLEdBQWMsSUFBSSxDQUFDLElBQUksQ0FBQyxZQUR0RDs7VUFFQSxJQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLElBQXZCO21CQUNJLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQXJCLElBQTBCLFdBQUEsR0FBYyxJQUFJLENBQUMsSUFBSSxDQUFDLFlBRHREOztRQVBLLENBRFQ7O2FBVUosSUFBSSxDQUFDLElBQUwsQ0FBVSxJQUFWO0lBYmlDLENBQXJDO0VBWG1CO0FBdER2QiIsInNvdXJjZXNDb250ZW50IjpbIlRvcmNoLlN0cmljdEVycm9ycygpXHJcblRvcmNoLkR1bXBFcnJvcnMoKVxyXG5Ub3JjaC5EaXNhYmxlQ29uc29sZVdhcm5pbmdzKClcclxuXHJcbnplbGRyb2lkID0gbmV3IFRvcmNoLkdhbWUoXCJjb250YWluZXJcIiwgXCJmaWxsXCIsIFwiZmlsbFwiLCBcIlplbGRyb2lkXCIsIFRvcmNoLkNBTlZBUylcclxuemVsZHJvaWQuR2V0U2NhbGUgPSAtPlxyXG4gICAgcmV0dXJuIHplbGRyb2lkLkNhbWVyYS5WaWV3cG9ydC53aWR0aCAvIDQ4MFxyXG5cclxuXHJcbkxvYWQgPSAoZ2FtZSkgLT5cclxuICAgIFBsYXllci5Mb2FkKGdhbWUpXHJcbiAgICBIVUQuTG9hZChnYW1lKVxyXG4gICAgTWFwUGllY2VzLk1hcFBpZWNlLkxvYWQoZ2FtZSlcclxuICAgIEVuZW15LkxvYWQoZ2FtZSlcclxuXHJcbiAgICBnYW1lLkxvYWQuVGV4dHVyZShcIkFzc2V0cy9BcnQvcGFydGljbGUucG5nXCIsIFwicGFydGljbGVcIilcclxuICAgIGdhbWUuTG9hZC5GaWxlKFwiTWFwcy90ZXN0LW1hcC0yLm1hcFwiLCBcIm1hcC0xXCIpXHJcbiAgICBnYW1lLkxvYWQuRmlsZShcInBhY2thZ2UuanNvblwiLCBcInBhY2thZ2VcIilcclxuICAgIGdhbWUuTG9hZC5BdWRpbyhcIkFzc2V0cy9BdWRpby9zaG9vdC53YXZcIiwgXCJzaG9vdFwiKVxyXG4gICAgZ2FtZS5Mb2FkLkF1ZGlvKFwiQXNzZXRzL0F1ZGlvL3Nob290LWV4cGxvZGUud2F2XCIsIFwic2hvb3QtZXhwbG9kZVwiKVxyXG5cclxuICAgIGdhbWUuT24gXCJMb2FkUHJvZ3Jlc3NlZFwiLCAoZXZlbnQpIC0+XHJcbiAgICAgICAgI2NvbnNvbGUubG9nKGV2ZW50LnByb2dyZXNzKVxyXG5cclxuSW5pdCA9IChnYW1lKSAtPlxyXG4gICAgZ2FtZS5DbGVhcihcIiMwMEFGMTFcIilcclxuICAgIGdhbWUuUGl4ZWxTY2FsZSgpXHJcbiAgICBUb3JjaC5TY2FsZSA9IDRcclxuXHJcbiAgICBnYW1lLmJhY2tncm91bmRBdWRpb1BsYXllciA9IGdhbWUuQXVkaW8uQ3JlYXRlQXVkaW9QbGF5ZXIoKVxyXG5cclxuICAgIGdhbWUucGxheWVyID0gbmV3IFBsYXllcihnYW1lKVxyXG4gICAgZ2FtZS5tYXBNYW5hZ2VyID0gbmV3IE1hcE1hbmFnZXIoZ2FtZSlcclxuICAgIGdhbWUuaHVkID0gbmV3IEhVRChnYW1lKVxyXG5cclxuICAgIGNvbG9yID0gVG9yY2guQ29sb3IuUmFuZG9tKCkuR2V0SHRtbFN0cmluZygpXHJcbiAgICBnYW1lLmNpcmMgPSBuZXcgVG9yY2guU2hhcGVzLkNpcmNsZShnYW1lLCA1MCwgNTAsIDI1LCBjb2xvciwgY29sb3IpXHJcbiAgICBnYW1lLmNpcmMuZHJhd0luZGV4ID0gMTAwMFxyXG5cclxuICAgIGdhbWUubGluID0gbmV3IFRvcmNoLlNoYXBlcy5MaW5lKGdhbWUsIDAsIDAsIDUwMCwgNTAwLCBcIm9yYW5nZVwiLCB7bGluZVdpZHRoOiA1fSlcclxuXHJcbiAgICBnYW1lLm1hcE1hbmFnZXIuTG9hZE1hcChcIm1hcC0xXCIpXHJcbiAgICBTZXRVcENvbnNvbGVDb21tYW5kcyhnYW1lKVxyXG5cclxuRHJhdyA9IChnYW1lKS0+XHJcblxyXG5VcGRhdGUgPSAoZ2FtZSkgLT5cclxuICAgIGlmIGdhbWUuZGVsdGFUaW1lID4gMTAwMC81MCB0aGVuIGFsZXJ0KFwiRlBTIERpcHBlZCEgI3tnYW1lLmRlbHRhVGltZX1cIilcclxuXHJcbnplbGRyb2lkLlN0YXJ0KExvYWQsIFVwZGF0ZSwgRHJhdywgSW5pdClcclxud2luZG93LnplbGRyb2lkID0gemVsZHJvaWRcclxuXHJcblxyXG4jIGluaXRpYWxpemF0aW9uLi4uXHJcblNldFVwQ29uc29sZUNvbW1hbmRzID0gKGdhbWUpIC0+XHJcbiAgICBnYW1lLmRlYnVnQ29uZG9sZSA9IG5ldyBUb3JjaC5EZWJ1Z0NvbnNvbGUoZ2FtZSlcclxuICAgIGdhbWUuZGVidWdDb25kb2xlLkFkZENvbW1hbmQgXCJTUEFXTlwiLCAodENvbnNvbGUsIHBpZWNlLCB4LCB5KSAtPlxyXG4gICAgICAgIHAgPSBuZXcgTWFwUGllY2VzW3BpZWNlXShnYW1lLCBbXCIwXCIsIFwiMFwiXSlcclxuICAgICAgICBwLnBvc2l0aW9uLnggPSBwYXJzZUludCh4KVxyXG4gICAgICAgIHAucG9zaXRpb24ueSA9IHBhcnNlSW50KHkpXHJcblxyXG4gICAgICAgIHRDb25zb2xlLmdhbWUuVHdlZW5zLlR3ZWVuKHAsIDUwMCwgVG9yY2guRWFzaW5nLlNtb290aCkuRnJvbSh7b3BhY2l0eTogMH0pLlRvKHtvcGFjaXR5OiAxfSlcclxuXHJcbiAgICAgICAgY29uc29sZS5sb2cocClcclxuXHJcbiAgICBnYW1lLmRlYnVnQ29uZG9sZS5BZGRDb21tYW5kIFwiVUNBTVwiLCAodENvbnNvbGUpIC0+XHJcbiAgICAgICAgY2FtVmVsb2NpdHkgPSAxXHJcbiAgICAgICAgdGFzayA9XHJcbiAgICAgICAgICAgIF90b3JjaF9hZGQ6IFwiVGFza1wiXHJcbiAgICAgICAgICAgIEV4ZWN1dGU6IChnYW1lKSAtPlxyXG4gICAgICAgICAgICAgICAgaWYgZ2FtZS5LZXlzLlJpZ2h0QXJyb3cuZG93blxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuQ2FtZXJhLnBvc2l0aW9uLnggLT0gY2FtVmVsb2NpdHkgKiBnYW1lLkxvb3AudXBkYXRlRGVsdGFcclxuICAgICAgICAgICAgICAgIGlmIGdhbWUuS2V5cy5MZWZ0QXJyb3cuZG93blxyXG4gICAgICAgICAgICAgICAgICAgIGdhbWUuQ2FtZXJhLnBvc2l0aW9uLnggKz0gY2FtVmVsb2NpdHkgKiBnYW1lLkxvb3AudXBkYXRlRGVsdGFcclxuICAgICAgICAgICAgICAgIGlmIGdhbWUuS2V5cy5VcEFycm93LmRvd25cclxuICAgICAgICAgICAgICAgICAgICBnYW1lLkNhbWVyYS5wb3NpdGlvbi55ICs9IGNhbVZlbG9jaXR5ICogZ2FtZS5Mb29wLnVwZGF0ZURlbHRhXHJcbiAgICAgICAgICAgICAgICBpZiBnYW1lLktleXMuRG93bkFycm93LmRvd25cclxuICAgICAgICAgICAgICAgICAgICBnYW1lLkNhbWVyYS5wb3NpdGlvbi55IC09IGNhbVZlbG9jaXR5ICogZ2FtZS5Mb29wLnVwZGF0ZURlbHRhXHJcbiAgICAgICAgZ2FtZS5UYXNrKHRhc2spXHJcbiJdfQ==
//# sourceURL=C:\dev\js\Torch.js\Games\Zeldroid\Src\Game.coffee